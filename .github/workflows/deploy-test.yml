name: Mock deployment

on:
    pull_request:
        types:
            - opened
            - labeled
            - synchronize

permissions:
    deployments: write
    contents: write
    pull-requests: write

jobs:
    mock-deployment:
        runs-on: ubuntu-latest
        steps:
            - name: Start Deployment
              uses: bobheadxi/deployments@v1
              id: deployment
              with:
                  step: start
                  token: ${{ secrets.GITHUB_TOKEN }}
                  ref: ${{ github.head_ref }}
                  env: Preview
                  override: false

            - name: Update Deployment Status
              uses: bobheadxi/deployments@v1
              if: always()
              with:
                  step: finish
                  token: ${{ secrets.GITHUB_TOKEN }}
                  env: ${{ steps.deployment.outputs.env }}
                  override: false
                  status: ${{ job.status }}
                  deployment_id: ${{ steps.deployment.outputs.deployment_id }}
                  env_url: "https://google.com"
